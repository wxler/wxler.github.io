<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/assets/logo.png?v=2.0.0" type="image/png" sizes="16x16"><link rel="icon" href="/assets/logo.png?v=2.0.0" type="image/png" sizes="32x32"><meta name="description" content="Scala之面向对象编程">
<meta property="og:type" content="article">
<meta property="og:title" content="三、Scala之面向对象编程">
<meta property="og:url" content="https://wxler.github.io/2021/03/23/110855/index.html">
<meta property="og:site_name" content="Layne&#39;s Blog">
<meta property="og:description" content="Scala之面向对象编程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323164729.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323212429.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323222615.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210322223800.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324101314.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323200911.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324103437.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324121243.png">
<meta property="og:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324141129.png">
<meta property="article:published_time" content="2021-03-23T03:08:55.000Z">
<meta property="article:modified_time" content="2021-03-26T07:33:48.330Z">
<meta property="article:author" content="wxler">
<meta property="article:tag" content="scala">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323164729.png"><meta name="keywords" content="wxler, Layne's Blog"><meta name="description" content="博客，分享，开源，心得"><title>三、Scala之面向对象编程 | Layne's Blog</title><link ref="canonical" href="https://wxler.github.io/2021/03/23/110855/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.0.0"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?01911aa0fc6bdb840626994292397110';
  hm.async = true;

  if (true) {
    hm.setAttribute('data-pjax', '');
  }
  var s = document.getElementsByTagName('script')[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"ocean","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: true,
  pjax: {"avoidBanner":true},
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/message/"><span class="header-nav-menu-item__icon"><i class="fa fa-comment"></i></span><span class="header-nav-menu-item__text">留言板</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">关于</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Layne's Blog</div><div class="header-banner-info__subtitle">一个爱好coding的男孩纸</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">三、Scala之面向对象编程</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-03-23</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-03-26</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">13.6k</span></span><span class="post-meta-item post-meta-item--readtime"><span class="post-meta-item__icon"><i class="far fa-clock"></i></span><span class="post-meta-item__info">阅读时长</span><span class="post-meta-item__value">99分</span></span></div></header><div class="post-body"><p>Scala之面向对象编程</p>
<a id="more"></a>
<p><strong>文章目录</strong></p>
<p><ul class="markdownIt-TOC">
<li><a href="#1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1">1. 类与对象</a></li>
<li><a href="#2-%E6%9E%84%E9%80%A0%E5%99%A8">2. 构造器</a></li>
<li><a href="#3-%E5%B1%9E%E6%80%A7%E9%AB%98%E7%BA%A7">3. 属性高级</a></li>
<li><a href="#4-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E6%B5%81%E7%A8%8B">4. 对象创建的流程</a></li>
<li><a href="#5-%E5%8C%85">5. 包</a>
<ul>
<li><a href="#51-scala%E5%8C%85%E7%9A%84%E7%89%B9%E7%82%B9%E6%A6%82%E8%BF%B0">5.1 Scala包的特点概述</a></li>
<li><a href="#52-scala%E5%8C%85%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82">5.2 Scala包注意事项和使用细节</a></li>
<li><a href="#53-%E5%8C%85%E5%AF%B9%E8%B1%A1">5.3 包对象</a></li>
<li><a href="#54-%E5%8C%85%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7">5.4 包的可见性</a></li>
<li><a href="#55-%E5%8C%85%E7%9A%84%E5%BC%95%E5%85%A5">5.5 包的引入</a></li>
</ul>
</li>
<li><a href="#6-%E5%B0%81%E8%A3%85-%E7%BB%A7%E6%89%BF-%E5%A4%9A%E6%80%81">6. 封装、继承、多态</a>
<ul>
<li><a href="#61-%E5%B0%81%E8%A3%85">6.1 封装</a></li>
<li><a href="#62-%E7%BB%A7%E6%89%BF">6.2 继承</a></li>
<li><a href="#63-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%92%8C%E8%BD%AC%E6%8D%A2">6.3 类型检查和转换</a></li>
<li><a href="#64-%E8%B6%85%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0">6.4 超类的构造</a></li>
<li><a href="#65-%E8%A6%86%E7%9B%96%E5%B1%9E%E6%80%A7%E6%96%B9%E6%B3%95">6.5 覆盖属性/方法</a></li>
<li><a href="#66-%E6%8A%BD%E8%B1%A1%E7%B1%BB">6.6 抽象类</a></li>
</ul>
</li>
<li><a href="#7-%E9%9D%99%E6%80%81%E6%A6%82%E5%BF%B5%E4%B8%8E%E4%BC%B4%E7%94%9F%E5%AF%B9%E8%B1%A1">7. 静态概念与伴生对象</a></li>
<li><a href="#8-%E6%8E%A5%E5%8F%A3trait%E7%89%B9%E5%BE%81">8 接口&amp;trait（特征）</a>
<ul>
<li><a href="#81-scala%E4%B8%AD%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%B8%8Etrait">8.1 scala中的接口与trait</a></li>
<li><a href="#82-trait-%E7%9A%84%E4%BD%BF%E7%94%A8">8.2 trait 的使用</a></li>
<li><a href="#83-%E5%B8%A6%E6%9C%89%E7%89%B9%E8%B4%A8%E7%9A%84%E5%AF%B9%E8%B1%A1">8.3 带有特质的对象</a></li>
<li><a href="#84-%E5%8F%A0%E5%8A%A0%E7%89%B9%E8%B4%A8">8.4 叠加特质</a></li>
<li><a href="#85-%E7%89%B9%E8%B4%A8%E4%B8%AD%E7%9A%84%E5%AD%97%E6%AE%B5%E5%92%8C%E6%96%B9%E6%B3%95">8.5 特质中的字段和方法</a></li>
<li><a href="#86-%E7%89%B9%E8%B4%A8%E6%9E%84%E9%80%A0%E9%A1%BA%E5%BA%8F">8.6 特质构造顺序</a></li>
<li><a href="#87-%E6%89%A9%E5%B1%95%E7%B1%BB%E7%9A%84%E7%89%B9%E8%B4%A8">8.7 扩展类的特质</a></li>
<li><a href="#88-%E8%87%AA%E8%BA%AB%E7%B1%BB%E5%9E%8Bselftype">8.8 自身类型(selftype)</a></li>
</ul>
</li>
<li><a href="#29-%E5%B5%8C%E5%A5%97%E7%B1%BB">2.9 嵌套类</a>
<ul>
<li><a href="#91-%E5%B5%8C%E5%A5%97%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8">9.1 嵌套类的使用</a></li>
<li><a href="#92-%E7%B1%BB%E5%9E%8B%E6%8A%95%E5%BD%B1">9.2 类型投影</a></li>
</ul>
</li>
</ul>
</p>

        <h2 id="1-类与对象"   >
          <a href="#1-类与对象" class="heading-link"><i class="fas fa-link"></i></a>1. 类与对象</h2>
      
<p><strong>定义类</strong></p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] class 类名 &#123;</span><br><span class="line">	类体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol>
<li>scala语法中，类并不声明为public，<strong>所有这些类都具有公有可见性</strong>(即默认就是public),[修饰符在后面再详解].</li>
<li>一个Scala源文件可以包含多个类.</li>
</ol>
<p><strong>属性/成员变量</strong></p>
<ol>
<li>属性的定义语法同变量，示例：<code>[访问修饰符] var 属性名称 [：类型] = 属性值</code></li>
<li>属性的定义类型可以为任意类型，包含值类型或引用类型</li>
<li>Scala中声明一个属性，<strong>必须显示的初始化</strong>，然后根据初始化数据的类型自动推断，属性类型可以省略(这点和Java不同)。</li>
<li>如果赋值为null，则一定要加类型，因为不加类型, 那么该属性的类型就是Null类型</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age : <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> sal = <span class="number">8090.9</span>  <span class="comment">//给属性赋初值，省略类型，会自动推导</span></span><br><span class="line">    <span class="keyword">var</span> <span class="type">Name</span>  = <span class="literal">null</span>  <span class="comment">// Name 是Null类型</span></span><br><span class="line">    <span class="keyword">var</span> address : <span class="type">String</span> = <span class="literal">null</span> <span class="comment">// address 是String类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="5">
<li>如果在定义属性时，如果用var修饰，则可暂时不赋值，也可以使用符号<code>_</code>下划线)，让系统分配默认值。<strong>val类型的成员变量，必须要自己手动初始化，不能使用符号<code>_</code>(下划线)</strong></li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age:<span class="type">Int</span>=_</span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span>=_</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> =<span class="string">"小明"</span><span class="comment">//必须手动初始化</span></span><br><span class="line">  <span class="keyword">val</span> age: <span class="type">Int</span> =<span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323164729.png"  alt="" />
      </p>
<p><em>java中的boolean初始值也是false</em></p>
<ol start="6">
<li>不同对象的属性是独立，互不影响，一个对象对属性的更改，不影响另外一个。</li>
</ol>
<p>属性的高级部分和构造器(构造方法/函数)相关，我们把属性高级部分放到构造器那里讲解。</p>
<p><strong>如何创建对象</strong></p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val | var 对象名 [：类型]  = new 类型()</span><br></pre></td></tr></table></div></figure>
<ol>
<li>如果我们不希望改变对象的引用(即：内存地址), 应该声明为val 性质的，否则声明为var, <strong>scala设计者推荐使用val</strong> ,因为一般来说，在程序中，我们只是改变对象属性的值，而不是改变对象的引用。</li>
<li>scala在声明对象变量时，可以根据创建对象的类型自动推断，所以类型声明可以省略，<strong>但当类型和后面new对象类型有继承关系即多态时</strong>，就必须写了</li>
</ol>
<p><strong>访问属性</strong>：对象名.属性名;</p>
<p><strong>方法</strong></p>
<p>Scala中的方法其实就是函数，声明规则请参考函数式编程中的函数声明。</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def 方法名(参数列表) [：返回值类型] = &#123;</span><br><span class="line">	方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol>
<li>当我们scala开始执行时，先在栈区开辟一个main栈。main栈是最后被销毁</li>
<li>当scala程序在执行到一个方法时，总会开一个新的栈。</li>
<li>每个栈是独立的空间，变量（基本数据类型）是独立的，相互不影响（引用类型除外）</li>
<li>当方法执行完毕后，该方法开辟的栈就会被jvm机回收。</li>
</ol>

        <h2 id="2-构造器"   >
          <a href="#2-构造器" class="heading-link"><i class="fas fa-link"></i></a>2. 构造器</h2>
      
<p>Java构造器基本语法</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] 方法名(参数列表)&#123;</span><br><span class="line">	构造方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>在Java中一个类可以定义多个不同的构造方法，构造方法重载</p>
<ul>
<li>如果程序员没有定义构造方法，系统会自动给类生成一个默认无参构造方法(也叫默认构造器)，比如 <code>Person (){}</code></li>
<li>一旦定义了自己的构造方法（构造器）,默认的构造方法就覆盖了，就不能再使用默认的无参构造方法，除非显示的定义一下,即:  <code>Person(){};</code></li>
</ul>
<p><strong>Scala构造器</strong></p>
<p>和Java一样，Scala构造对象也需要调用构造方法，并且可以有任意多个构造方法（即scala中构造器也支持重载）。<br />
Scala类的构造器包括： 主构造器 和 辅助构造器</p>
<p>基本语法</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class 类名(形参列表) &#123;  // 主构造器</span><br><span class="line">	// 类体</span><br><span class="line">def  this(形参列表) &#123;  // 辅助构造器</span><br><span class="line"> &#125;</span><br><span class="line">def  this(形参列表) &#123;  //辅助构造器可以有多个...</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>辅助构造器可以有多个，编译器通过不同参数来区分</p>
<p><strong>Scala构造器注意事项和细节</strong></p>
<ol>
<li>Scala构造器作用是完成对新对象的初始化，构造器没有返回值。</li>
<li>主构造器的声明直接放置于类名之后 [反编译]</li>
<li>主构造器会执行类定义中的所有语句，这里可以体会到Scala的函数式编程和面向对象编程融合在一起，即：<strong>构造器也是方法</strong>（函数），传递参数和使用方法和前面的函数部分内容没有区别</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> ab=<span class="keyword">new</span> <span class="type">AB</span> <span class="comment">//会输出ABABAB</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AB</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cd=<span class="number">3</span></span><br><span class="line">    <span class="keyword">if</span>(cd==<span class="number">3</span>)<span class="comment">//Scala的类中可以写任意代码</span></span><br><span class="line">    	println(<span class="string">"ABABAB"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="4">
<li>如果主构造器无参数，小括号可省略，构建对象时调用的构造方法的小括号也可以省略</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a1=<span class="keyword">new</span> <span class="type">AA</span></span><br><span class="line"><span class="keyword">var</span> a2=<span class="keyword">new</span> <span class="type">AA</span>()</span><br></pre></td></tr></table></div></figure>
<ol start="5">
<li>辅助构造器名称为this（这个和Java是不一样的），多个辅助构造器通过不同参数列表进行区分， <strong>在底层就是构造器重载</strong>。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p=<span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"小明"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="comment">//辅助构造器无论是直接或间接，最终都一定要调用主构造器，执行主构造器的逻辑,而且需要放在辅助构造器的第一行</span></span><br><span class="line">        <span class="keyword">this</span>() <span class="comment">//直接调用主构造器</span></span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>() <span class="comment">//直接调用主构造器</span></span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">        <span class="keyword">this</span>.age = age</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(age: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">"匿名"</span>) <span class="comment">//间接调用主构造器,因为 def this(name : String) 中调用了主构造器!</span></span><br><span class="line">        <span class="keyword">this</span>.age = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="6">
<li>如果想让主构造器变成私有的，可以在()之前加上private，这样用户只能通过辅助构造器来构造对象了【反编译查看】</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test6</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p=<span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"wxl"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="title">private</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>() </span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="7">
<li><strong>辅助构造器的声明不能和主构造器的声明一致</strong>，会发生错误(即构造器名重复)</li>
</ol>

        <h2 id="3-属性高级"   >
          <a href="#3-属性高级" class="heading-link"><i class="fas fa-link"></i></a>3. 属性高级</h2>
      
<p>（1）Scala类的主构造器的形参未用任何修饰符修饰，那么这个参数是局部变量</p>
<p>scala示例：</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////1. 如果主构造器是Worker(inName:String)，那么abc这个类的一个局部变量</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker1</span>(<span class="params">abc: <span class="type">String</span></span>) </span>&#123;a</span><br><span class="line">  <span class="keyword">var</span> name = abc</span><br><span class="line">  <span class="keyword">var</span> age:<span class="type">Int</span>=_</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(inName: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(inName)</span><br><span class="line">    <span class="keyword">var</span> t=abc</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>
<p>scala反编译如下，可以看到，abc这个主构造器的参数没有类似于get的方法，<strong>因此外界不能访问</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String abc;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker1</span><span class="params">(String abc)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> name_$eq(String x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> age_$eq(<span class="keyword">int</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker1</span><span class="params">(String inName, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(inName);</span><br><span class="line">    String t = <span class="keyword">this</span>.abc;</span><br><span class="line">    age_$eq(age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>（2）Scala类的主构造器的形参用var修饰，那么该参数是这个类的成员变量，且提供了get和set功能，外界可读可写</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 如果主构造器是Worker(var abc:String)，那么abc是这个类的成员函数，提供了get和set功能，外界可读可写</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker2</span>(<span class="params">var abc: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = abc</span><br><span class="line">  <span class="keyword">var</span> age:<span class="type">Int</span>=_</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(inName: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(inName)</span><br><span class="line">    <span class="keyword">var</span> t=abc</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>scala反编译为java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String abc;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">abc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> abc_$eq(String x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.abc = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name = abc();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> name_$eq(String x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> age_$eq(<span class="keyword">int</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker2</span><span class="params">(String abc)</span> </span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker2</span><span class="params">(String inName, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(inName);</span><br><span class="line">    String t = abc();</span><br><span class="line">    age_$eq(age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>（3）Scala类的主构造器的形参用val修饰，那么该参数是这个类的成员变量，且只提供了get，外界只能读</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3. 如果主构造器是Worker(val abc:String)，那么abc是这个类的成员函数，提供了set功能，外界只可读</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker3</span>(<span class="params">val abc: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = abc</span><br><span class="line">  <span class="keyword">var</span> age:<span class="type">Int</span>=_</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(inName: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(inName)</span><br><span class="line">    <span class="keyword">var</span> t=abc</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>scala反编译为java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker3</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String abc;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">abc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker3</span><span class="params">(String abc)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> name_$eq(String x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> age_$eq(<span class="keyword">int</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker3</span><span class="params">(String inName, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(inName);</span><br><span class="line">    String t = abc();</span><br><span class="line">    age_$eq(age);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>(4）如果类的成员变量使用val关键字声明，则该属性必须手动初始化，不能用下划线初始化 ，并且类中默认只提供了get方法，所以只能读不能写【案例+反编译】</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> =<span class="string">"小明"</span></span><br><span class="line">  <span class="keyword">val</span> age: <span class="type">Int</span> =<span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>scala反编译成java代码，可以看到，没有提供set方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String name = <span class="string">";</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  public String name() &#123;</span></span><br><span class="line"><span class="string">    return this.name;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  private final int age = 10;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  public int age() &#123;</span></span><br><span class="line"><span class="string">    return this.age;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></div></figure>
<p>(5) 如果类的成员变量使用var关键字声明，则该可以用下划线初始化，并且类中默认提供了get和set方法，所以可读可写</p>
<p>scala语言</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>scala反编译为java</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> int age;</span><br><span class="line">  </span><br><span class="line">  public <span class="type">String</span> name() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void name_$eq(<span class="type">String</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public int age() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void age_$eq(int x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></div></figure>
<p>（6)JavaBeans规范定义了Java的属性是像getXxx（）和setXxx（）的方法。许多Java工具（框架）都依赖这个命名习惯。为了Java的互操作性。将Scala字段加<code>@BeanProperty</code>时，这样会自动生成规范的 setXxx/getXxx 方法。这时可以使用 对象.setXxx() 和 对象.getXxx() 来调用属性。</p>
<p>scala示例</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker4</span>(<span class="params">val abc: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = abc</span><br><span class="line">  <span class="meta">@BeanProperty</span> <span class="keyword">var</span> age:<span class="type">Int</span>=_</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>反编译为java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker4</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String abc;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">abc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Worker4</span><span class="params">(String abc)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = abc;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> name_$eq(String x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> age_$eq(<span class="keyword">int</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> age();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> x$<span class="number">1</span>)</span> </span>&#123;</span><br><span class="line">    age_$eq(x$<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h2 id="4-对象创建的流程"   >
          <a href="#4-对象创建的流程" class="heading-link"><i class="fas fa-link"></i></a>4. 对象创建的流程</h2>
      
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"><span class="keyword">var</span> age: <span class="type">Short</span> = <span class="number">90</span></span><br><span class="line"><span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(n: <span class="type">String</span>, a: <span class="type">Int</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>()</span><br><span class="line"><span class="keyword">this</span>.name = n</span><br><span class="line"><span class="keyword">this</span>.age = a</span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="keyword">var</span> p : <span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"小倩"</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></div></figure>
<p>流程分析(面试题-写出)</p>
<ol>
<li>加载类的信息(属性信息，方法信息)</li>
<li>在内存中(堆)开辟空间</li>
<li>使用父类的构造器(主和辅助)进行初始</li>
<li>使用主构造器对属性进行初始化 【age:90, naem nul】</li>
<li>使用辅助构造器对属性进行初始化 【 age:20, naem 小倩 】</li>
<li>将开辟的对象的地址赋给 p这个引用</li>
</ol>

        <h2 id="5-包"   >
          <a href="#5-包" class="heading-link"><i class="fas fa-link"></i></a>5. 包</h2>
      

        <h3 id="51-scala包的特点概述"   >
          <a href="#51-scala包的特点概述" class="heading-link"><i class="fas fa-link"></i></a>5.1 Scala包的特点概述</h3>
      
<p>Java包的三大作用</p>
<ol>
<li>区分相同名字的类</li>
<li>当类很多时,可以很好的管理类</li>
<li>控制访问范围</li>
</ol>
<p>Java打包语法：如 <code>package com.atguigu;</code></p>
<p>Java如何引入包：如 <code>import java.awt.*;</code></p>
<p><strong>Scala包的基本介绍</strong></p>
<p>和Java一样，Scala中管理项目可以使用包，但Scala中的包的功能更加强大，使用也相对复杂些，下面我们学习Scala包的使用和注意事项。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.chapter02.xh</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.atguigu.chapter02.xm</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用不同包下相同的类</span></span><br><span class="line"><span class="keyword">var</span> cat1 = <span class="keyword">new</span> com.atguigu.chapter02.xh.<span class="type">Cat</span>()</span><br><span class="line">println(<span class="string">"cat1"</span> + cat1)</span><br><span class="line"><span class="keyword">var</span> cat2 = <span class="keyword">new</span> com.atguigu.chapter02.xm.<span class="type">Cat</span>()</span><br><span class="line">println(<span class="string">"cat2"</span> + cat2)</span><br></pre></td></tr></table></div></figure>
<p>基本语法：<code>package 包名</code>，和java相同</p>
<p>Scala包的三大作用(和Java一样)</p>
<ol>
<li>区分相同名字的类</li>
<li>当类很多时,可以很好的管理类</li>
<li>控制访问范围</li>
</ol>
<p><strong>命名规范</strong>：<code>com.公司名.项目名.业务模块名</code></p>
<p>比如：</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.atguigu.oa.model  </span><br><span class="line">com.atguigu.oa.controller</span><br><span class="line">com.sina.edu.user</span><br><span class="line">com.sohu.bank.order</span><br></pre></td></tr></table></div></figure>
<p><strong>Scala会自动引入的常用包</strong>（不需要自己再手动引入）</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.* （这个java也会自动引入）</span><br><span class="line">scala._ ，如scala.List就不用手动引入就可以使用，但是其子包不能使用，比如scala.io.*里面的内容就不能使用</span><br><span class="line">scala.Predef._ (一般很多的隐式转换都在该包下)，如Predef.println等等常用方法可以使用</span><br></pre></td></tr></table></div></figure>
<p><strong>Scala中包名和源码所在的文件目录可以不一致</strong>，但是编译后的字节码文件（.class文件）路径和包名会保持一致(这个工作由编译器完成)。</p>

        <h3 id="52-scala包注意事项和使用细节"   >
          <a href="#52-scala包注意事项和使用细节" class="heading-link"><i class="fas fa-link"></i></a>5.2 Scala包注意事项和使用细节</h3>
      
<p>1）scala进行package 打包时，可以有如下形式。</p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323212429.png"  alt="" />
      </p>
<p><strong>上面三种打包方式完全等价</strong></p>
<ol start="2">
<li>
<p>包也可以像嵌套类那样嵌套使用（包中有包）, 这个在前面的第三种打包方式已经讲过了，在使用第三种方式时的好处是：程序员可以在同一个文件中，将类(class / object)、trait 创建在不同的包中，这样就非常灵活了。</p>
</li>
<li>
<p>作用域原则：可以直接向上访问。即: <strong>Scala中子包中直接访问父包中的内容</strong>, 大括号体现作用域。<br />
(提示：Java中子包使用父包的类，需要import)。在子包和父包 类重名时，默认采用就近原则，如果希望指定使用某个类，则带上包名即可。</p>
</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个类就是在com.atguigu包下</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个类也在com.atguigu包下</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Monster</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> scala &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个类就是在com.atguigu.scala包下</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个Test 类对象</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//子类可以直接访问父类的内容</span></span><br><span class="line">    <span class="keyword">var</span> dog = <span class="keyword">new</span> <span class="type">Dog</span>()</span><br><span class="line">    println(<span class="string">"dog="</span> + dog)</span><br><span class="line">    <span class="comment">//在子包和父包 类重名时，默认采用就近原则.</span></span><br><span class="line">    <span class="keyword">var</span> u = <span class="keyword">new</span> <span class="type">User</span>()</span><br><span class="line">    println(<span class="string">"u="</span> + u)</span><br><span class="line">    <span class="comment">//在子包和父包 类重名时，如果希望指定使用某个类，则带上包名即可</span></span><br><span class="line">    <span class="keyword">var</span> u2 = <span class="keyword">new</span> com.atguigu.<span class="type">User</span>()</span><br><span class="line">    println(<span class="string">"u2="</span> + u2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="4">
<li>父包要访问子包的内容时，需要import对应的类等</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu &#123;</span><br><span class="line">  <span class="comment">//引入在com.atguigu 包中希望使用到子包的类Tiger ,因此需要引入.</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">import</span> com.atguigu.scala.<span class="type">Tiger</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//这个类就是在com.atguigu包下</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">package</span> scala &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Tiger 在 com.atguigu.scala 包中</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Tiger</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="comment">//如果要在父包使用到子包的类，需要import</span></span><br><span class="line">      <span class="keyword">import</span> com.atguigu.scala.<span class="type">Tiger</span></span><br><span class="line">      <span class="keyword">val</span> tiger = <span class="keyword">new</span> <span class="type">Tiger</span>()</span><br><span class="line">      println(<span class="string">"tiger="</span> + tiger)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="5">
<li>
<p>可以在同一个.scala文件中，声明多个并列的package(建议嵌套的pakage不要超过3层)</p>
</li>
<li>
<p>包名可以相对也可以绝对，比如，访问BeanProperty的绝对路径是：<code>_root_. scala.beans.BeanProperty</code> ，在一般情况下：我们使用相对路径来引入包，只有当包名冲突时，使用绝对路径来处理。</p>
</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span>(<span class="params">var name: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//第一种形式</span></span><br><span class="line">  <span class="comment">//@BeanProperty var age: Int = _</span></span><br><span class="line">  <span class="comment">//第二种形式, 和第一种一样，都是相对路径引入</span></span><br><span class="line">  <span class="comment">//@scala.beans.BeanProperty var age: Int = _</span></span><br><span class="line">  <span class="comment">//第三种形式, 是绝对路径引入，可以解决包名冲突</span></span><br><span class="line">  @_root_.scala.beans.<span class="type">BeanProperty</span> <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestBean</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> m = <span class="keyword">new</span> <span class="type">Manager</span>(<span class="string">"jack"</span>)</span><br><span class="line">    println(<span class="string">"m="</span> + m)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h3 id="53-包对象"   >
          <a href="#53-包对象" class="heading-link"><i class="fas fa-link"></i></a>5.3 包对象</h3>
      
<p>基本介绍：包可以包含类、对象和特质trait，但不能包含函数/方法或变量的定义。这是Java虚拟机的局限。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Test</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">package</span> scala &#123;</span><br><span class="line">    <span class="comment">//在包里面直接写方法或者定义变量就报错</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">""</span> <span class="comment">//报错</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test1</span> </span>() &#123;<span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>为了弥补这一点不足，scala提供了包对象的概念来解决这个问题。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//每个包都可以有一个包对象。你需要在父包(com.atguigu)中定义它,</span></span><br><span class="line">  <span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">scala</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">"jack"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayOk</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"package object sayOk!"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">//这个要和包对象名一致</span></span><br><span class="line">  <span class="keyword">package</span> scala &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">TestObj</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//可以使用包对象中的变量和方法</span></span><br><span class="line">        println(<span class="string">"name="</span> + name)</span><br><span class="line">        sayOk() <span class="comment">//这个sayOk 就是包对象scala中声明的sayOk</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>包对象的注意事项</p>
<ol>
<li>
<p>每个包都可以有一个包对象，而且只能有一个。你需要在父包中定义它。</p>
</li>
<li>
<p>在包对象中可以定义变量和方法，在包对象中定义的变量和方法就可以在对应的子包中使用</p>
</li>
<li>
<p>包对象名称需要和子包名一致，一般用来对包的功能补充</p>
</li>
</ol>

        <h3 id="54-包的可见性"   >
          <a href="#54-包的可见性" class="heading-link"><i class="fas fa-link"></i></a>5.4 包的可见性</h3>
      
<p>java提供四种访问控制修饰符号控制方法和变量的访问权限（范围）:</p>
<ol>
<li>公开级别:用public 修饰,对外公开</li>
<li>受保护级别:用protected修饰,对子类和同一个包中的类公开</li>
<li>默认级别:没有修饰符号,向同一个包的类公开.</li>
<li>私有级别:用private修饰,只有类本身可以访问,不对外公开.</li>
</ol>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323222615.png"  alt="" />
      </p>
<p>Java访问修饰符使用注意事项</p>
<ol>
<li>修饰符可以用来修饰类中的属性，成员方法以及类</li>
<li>只有默认的和public才能修饰类！，并且遵循上述访问权限的特点。</li>
</ol>
<p><strong>Scala中包的可见性</strong></p>
<p>在Java中，访问权限分为: public，private，protected和默认。在Scala中，你可以通过类似的修饰符达到同样的效果。但是使用上有区别。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Testvisit</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span>  c = <span class="keyword">new</span> <span class="type">Clerk</span>()</span><br><span class="line">    c.showInfo()</span><br><span class="line">    <span class="type">Clerk</span>.test(c)</span><br><span class="line">    <span class="comment">//c.sal不能访问</span></span><br><span class="line">    <span class="comment">//Clerk.sal不能访问</span></span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clerk</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">"jack"</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> sal : <span class="type">Double</span> = <span class="number">9999.9</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">showInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">" name "</span> + name + <span class="string">" sal= "</span> + sal)</span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Clerk</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(c: <span class="type">Clerk</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//这里体现出在伴生对象中，可以访问c.sal</span></span><br><span class="line">    println(<span class="string">"test() name="</span> + c.name + <span class="string">" sal= "</span> + c.sal)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol>
<li>
<p>当属性访问权限为默认时，从底层看属性是private的，但是因为提供了xxx_$eq()[类似setter]/xxx()[类似getter] 方法，因此从使用效果看是任何地方都可以访问)</p>
</li>
<li>
<p>当方法访问权限为默认时，默认为public访问权限</p>
</li>
<li>
<p>private为私有权限，只在类的内部和伴生对象中可用</p>
</li>
<li>
<p>protected为受保护权限，scala中受保护权限比Java中更严格，只能子类访问，同包无法访问 (编译器)</p>
</li>
<li>
<p>在scala中没有public关键字,即不能用public显式的修饰属性和方法。</p>
</li>
<li>
<p>包访问权限（表示属性和方法有了限制。<strong>同时包也有了限制</strong>），这点和Java不一样，体现出Scala包使用的灵活性。</p>
</li>
</ol>
<p>下面的实例，相当于在private的基础上，扩大了访问权限</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA.layne</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Testvisit1</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span>  c = <span class="keyword">new</span> <span class="type">Clerk</span>()</span><br><span class="line">    <span class="comment">//c.showInfo()加了private，方法就不能访问</span></span><br><span class="line">    <span class="keyword">val</span> sal=c.sal</span><br><span class="line">    println(sal) <span class="comment">//输出9999.9</span></span><br><span class="line"></span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clerk</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">"jack"</span></span><br><span class="line">  <span class="comment">//这里我们增加了一个包的访问权限，即在当前layne包下，sal属性可以访问</span></span><br><span class="line">  <span class="keyword">private</span>[layne] <span class="keyword">var</span> sal : <span class="type">Double</span> = <span class="number">9999.9</span></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">showInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">" name "</span> + name + <span class="string">" sal= "</span> + sal)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h3 id="55-包的引入"   >
          <a href="#55-包的引入" class="heading-link"><i class="fas fa-link"></i></a>5.5 包的引入</h3>
      
<p>Scala引入包也是使用import, 基本的原理和机制和Java一样，但是Scala中的import功能更加强大，也更灵活。</p>
<p>因为Scala语言源自于Java，所以java.lang包中的类会自动引入到当前环境中，而Scala中的scala包和Predef包的类也会自动引入到当前环境中，即起其下面的类可以直接使用。</p>
<p>如果想要把其他包中的类引入到当前环境中，需要使用import</p>
<p><strong>Scala引入包的细节和注意事项</strong></p>
<ol>
<li>在Scala中，import语句可以出现在任何地方，并不仅限于文件顶部，import语句的作用一直延伸到包含该语句的块末尾。这种语法的好处是：在需要时在引入包，缩小import 包的作用范围，提高效率。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">import</span> scala.beans.<span class="type">BeanProperty</span></span><br><span class="line">    <span class="meta">@BeanProperty</span> <span class="keyword">var</span>  name : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="meta">@BeanProperty</span> <span class="keyword">var</span>  name : <span class="type">String</span> = <span class="string">""</span> <span class="comment">//这里不可以使用上面引入的BeanProperty</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="2">
<li>Java中如果想要导入包中所有的类，可以通过通配符*，Scala中采用下 _</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入scala.io中所有的类</span></span><br><span class="line"><span class="keyword">import</span> scala.io._</span><br></pre></td></tr></table></div></figure>
<ol start="3">
<li>如果不想要某个包中全部的类，而是其中的几个类，可以采用选取器(大括号</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">import</span> scala.collection.mutable.&#123;<span class="type">HashMap</span>, <span class="type">HashSet</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="type">HashMap</span>()</span><br><span class="line">    <span class="keyword">var</span> set = <span class="keyword">new</span> <span class="type">HashSet</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="4">
<li>如果引入的多个包中含有相同的类，那么可以将不需要的类进行重命名进行区分，这个就是重命名。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.&#123; <span class="type">HashMap</span>=&gt;<span class="type">JavaHashMap</span>, <span class="type">List</span>&#125;</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable._</span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="type">HashMap</span>() <span class="comment">// 此时的HashMap指向的是scala中的HashMap</span></span><br><span class="line"><span class="keyword">var</span> map1 = <span class="keyword">new</span> <span class="type">JavaHashMap</span>(); <span class="comment">// 此时使用的java中hashMap的别名</span></span><br></pre></td></tr></table></div></figure>
<ol start="5">
<li>如果某个冲突的类根本就不会用到，那么这个类可以直接隐藏掉。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.&#123; <span class="type">HashMap</span>=&gt;_, _&#125; <span class="comment">// 含义为 引入java.util包的所有类，但是忽略HahsMap类.</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="type">HashMap</span>() <span class="comment">// 此时的HashMap指向的是scala中的HashMap, 而且idea工具，的提示也不会显示java.util的HashMaple</span></span><br></pre></td></tr></table></div></figure>

        <h2 id="6-封装-继承-多态"   >
          <a href="#6-封装-继承-多态" class="heading-link"><i class="fas fa-link"></i></a>6. 封装、继承、多态</h2>
      

        <h3 id="61-封装"   >
          <a href="#61-封装" class="heading-link"><i class="fas fa-link"></i></a>6.1 封装</h3>
      
<p><strong>Scala封装的注意事项和细节</strong></p>
<ol>
<li>
<p>Scala中为了简化代码的开发，当声明属性时，本身就自动提供了对应setter/getter方法，如果属性声明为private的，那么自动生成的setter/getter方法也是private的，如果属性省略访问权限修饰符，那么自动生成的setter/getter方法是public的。</p>
</li>
<li>
<p>因此我们如果只是对一个属性进行简单的set和get ，只要声明一下该属性(属性使用默认访问修饰符) 不用写专门的getset，默认会创建，访问时，直接对象.变量。这样也是为了保持访问一致性</p>
</li>
<li>
<p>从形式上看 dog.food 直接访问属性，其实底层仍然是访问的方法,  看一下反编译的代码就明白</p>
</li>
<li>
<p>有了上面的特性，目前很多新的框架，在进行反射时，也支持对属性的直接反射</p>
</li>
</ol>

        <h3 id="62-继承"   >
          <a href="#62-继承" class="heading-link"><i class="fas fa-link"></i></a>6.2 继承</h3>
      
<p>Java继承的简单回顾 <code>class 子类名 extends 父类名 { 类体 }</code>，子类继承父类的属性和方法</p>
<p>（1）和Java一样，Scala也支持类的单继承</p>
<p>Scala继承的基本语法</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class 子类名 extends 父类名  &#123; 类体 &#125;</span><br></pre></td></tr></table></div></figure>
<p>示例：</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">showInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"学生信息如下："</span>)</span><br><span class="line">    println(<span class="string">"名字："</span> + <span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">studying</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="keyword">this</span>.name + <span class="string">"学习 scala中...."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>（2）子类继承了所有的属性，只是私有的属性不能直接访问，需要通过公共的方法去访问</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Extends02</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> =</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> sub = <span class="keyword">new</span> <span class="type">Sub</span>()</span><br><span class="line">  sub.sayOk()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n1: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">var</span> n2: <span class="type">Int</span> = <span class="number">2</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> n3: <span class="type">Int</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test100</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"base 100"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">def</span> <span class="title">test200</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"base 200"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">test300</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"base 300"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayOk</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">this</span>.n1 = <span class="number">20</span></span><br><span class="line">    <span class="keyword">this</span>.n2 = <span class="number">40</span></span><br><span class="line">    println(<span class="string">"范围"</span> + <span class="keyword">this</span>.n1 + <span class="keyword">this</span>.n2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>（3）scala明确规定，重写一个非抽象方法需要用override修饰符，调用超类的方法使用super关键字</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"tom"</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() &#123;</span><br><span class="line">    println(<span class="string">"Person printName() "</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这里需要显式的使用override</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() &#123;</span><br><span class="line">    println(<span class="string">"Emp printName() "</span> + name)</span><br><span class="line">    <span class="keyword">super</span>.printName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h3 id="63-类型检查和转换"   >
          <a href="#63-类型检查和转换" class="heading-link"><i class="fas fa-link"></i></a>6.3 类型检查和转换</h3>
      
<p>要测试某个对象是否属于某个给定的类，可以用isInstanceOf方法。用asInstanceOf方法将引用转换为子类的引用。classOf获取对象的类名。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA.layne</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 获取对象类型</span></span><br><span class="line">    println(classOf[<span class="type">String</span>])<span class="comment">//class java.lang.String</span></span><br><span class="line">    println(classOf[<span class="type">Emp</span>])<span class="comment">//class testA.layne.Emp</span></span><br><span class="line">    <span class="keyword">val</span> s = <span class="string">"zhangsan"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这种是Java中反射方式得到类型</span></span><br><span class="line">    println(s.getClass.getName)<span class="comment">//java.lang.String</span></span><br><span class="line">    println(s.isInstanceOf[<span class="type">String</span>])<span class="comment">///true</span></span><br><span class="line">    <span class="comment">//将s显示转换成String</span></span><br><span class="line">    println(s.asInstanceOf[<span class="type">String</span>])<span class="comment">//zhangsan</span></span><br><span class="line">    <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    <span class="keyword">val</span> e = <span class="keyword">new</span> <span class="type">Emp</span></span><br><span class="line">    p = e <span class="comment">//将子类对象赋给父类。</span></span><br><span class="line">    p.name = <span class="string">"layne"</span></span><br><span class="line">    println(e.name)<span class="comment">//layne</span></span><br><span class="line">    p.asInstanceOf[<span class="type">Emp</span>].printName()<span class="comment">//调用子类emp中的方法</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"tom"</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() &#123;</span><br><span class="line">    println(<span class="string">"Person printName() "</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">//这里需要显式的使用override</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() &#123;</span><br><span class="line">    println(<span class="string">"Emp printName() "</span> + name)</span><br><span class="line">    <span class="keyword">super</span>.printName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ul>
<li>classOf[String]就如同Java的 String.class 。</li>
<li>obj.isInstanceOf[T]就如同Java的obj instanceof T 判断obj是不是T类型。</li>
<li>obj.asInstanceOf[T]就如同Java的(T)obj 将obj强转成T类型。</li>
</ul>

        <h3 id="64-超类的构造"   >
          <a href="#64-超类的构造" class="heading-link"><i class="fas fa-link"></i></a>6.4 超类的构造</h3>
      
<p>在Java中，创建子类对象时，子类的构造器总是去调用一个父类的构造器(显式或者隐式调用)。</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">A</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"A()"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">A</span> <span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"A(String name)"</span> + name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">B</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//这里会隐式调用super(); 就是无参的父类构造器A()</span></span><br><span class="line">    System.out.println(<span class="string">"B()"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">B</span> <span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span> (name);</span><br><span class="line">    System.out.println(<span class="string">"B(String name)"</span> + name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>在Scala中，类有一个主构器和任意数量的辅助构造器，而每个辅助构造器都必须先调用主构造器(也可以是间接调用)，这点在前面我们说过了</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">"zhangsan"</span></span><br><span class="line">  println(<span class="string">"Person..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"Emp ...."</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span> <span class="comment">// 必须调用主构造器，这里的主构造器指的是Emp</span></span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    println(<span class="string">"Emp 辅助构造器~"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>Scala中，只有主构造器可以调用父类的构造器。辅助构造器不能直接调用父类的构造器。在Scala的构造器中，你不能调用super(params)</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name: <span class="type">String</span></span>) </span>&#123; <span class="comment">//父类的构造器</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span> (<span class="params">name: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;<span class="comment">// 将子类参数传递给父类构造器,这种写法√</span></span><br><span class="line">    <span class="comment">// super(name)  (×) 没有这种语法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span>  <span class="title">this</span></span>() &#123;</span><br><span class="line">    	<span class="keyword">super</span>(<span class="string">"abc"</span>) <span class="comment">// (×)不能在辅助构造器中调用父类的构造器</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>举一个例子</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA.layne</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> stu:<span class="type">PersonA</span>=<span class="keyword">new</span> <span class="type">Student</span>(<span class="string">"Layne"</span>)</span><br><span class="line">    stu.printName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonA</span>(<span class="params">pname:<span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"tom"</span></span><br><span class="line">  println(<span class="string">"Welcome to PersonA："</span>+pname)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() &#123;</span><br><span class="line">    println(<span class="string">"Person printName() "</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">studentname:<span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">PersonA</span>(<span class="params">studentname</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sno:<span class="type">Int</span>=<span class="number">20</span></span><br><span class="line"></span><br><span class="line">  println(<span class="string">"Welcome to Student："</span>+studentname)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">    println(<span class="string">"Student priceName()"</span>+name)</span><br><span class="line">    <span class="keyword">super</span>.printName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>输出</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Welcome to PersonA：Layne</span><br><span class="line">Welcome to Student：Layne</span><br><span class="line">Student priceName()tom</span><br><span class="line">Person printName() tom</span><br></pre></td></tr></table></div></figure>

        <h3 id="65-覆盖属性方法"   >
          <a href="#65-覆盖属性方法" class="heading-link"><i class="fas fa-link"></i></a>6.5 覆盖属性/方法</h3>
      
<p>在Scala中，子类改写父类的字段，我们称为覆写/重写字段。覆写字段需使用override修饰。</p>
<p>现在，回顾一下java的动态绑定，下面可以看到，对象a都是调用的子类方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA.layne;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">T5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> B();</span><br><span class="line">        System.out.println(a.sum());  <span class="comment">//40</span></span><br><span class="line">        System.out.println(a.sum1()); <span class="comment">//30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">20</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>来看一个scala覆盖字段的例子</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> testA.layne</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T6</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> obj : <span class="type">AA</span> = <span class="keyword">new</span> <span class="type">BB</span>()</span><br><span class="line">    <span class="keyword">val</span> obj2 : <span class="type">BB</span> = <span class="keyword">new</span> <span class="type">BB</span>()</span><br><span class="line">    println(obj.age)<span class="comment">//20</span></span><br><span class="line">    println(obj.age)<span class="comment">//20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> age : <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BB</span> <span class="keyword">extends</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> age : <span class="type">Int</span> = <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ul>
<li>def只能重写另一个def(即：方法只能重写另一个方法)</li>
<li>val只能重写另一个val 属性 或 重写不带参数的def</li>
</ul>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断1</span></span><br><span class="line"><span class="comment">//代码正确吗?不正确，重写时类型一定要保持一致</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AAAA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BBBB</span> <span class="keyword">extends</span> <span class="title">AAAA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span>  <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"jj"</span> <span class="comment">//类型没保持一致</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断2</span></span><br><span class="line"><span class="comment">//代码正确吗?不正确，用var修饰的变量不能被重写</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AAAA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BBBB</span> <span class="keyword">extends</span> <span class="title">AAAA</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span>  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"jj"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断3，正确，val变量可以重新一个不带参数的def</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sal</span></span>(): <span class="type">Int</span> = &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"><span class="keyword">override</span> <span class="keyword">val</span> sal : <span class="type">Int</span> = <span class="number">0</span> <span class="comment">//val变量可以重新一个不带参数的def</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>var只能重写另一个抽象的var属性</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A03</span></span>&#123;</span><br><span class="line">  <span class="keyword">val</span> age:<span class="type">Int</span>=<span class="number">10</span></span><br><span class="line">  <span class="keyword">var</span> name:<span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B03</span> <span class="keyword">extends</span> <span class="title">A03</span></span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> age:<span class="type">Int</span>=<span class="number">20</span></span><br><span class="line">  <span class="keyword">var</span> name:<span class="type">String</span>=_</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>抽象属性：声明未初始化的变量就是抽象的属性,抽象属性在抽象类</p>
<p>var重写抽象的var属性小结：</p>
<ol>
<li>一个属性没有初始化，那么这个属性就是抽象属性</li>
<li>抽象属性在编译成字节码文件时，属性并不会声明，但是会自动生成抽象方法，所以类必须声明为抽象类</li>
</ol>
<p>上面的代码反编译为java代码</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ABC</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> int a = <span class="number">10</span>;</span><br><span class="line">  </span><br><span class="line">  public int a() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void a_$eq(int x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.a = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> int b = <span class="number">20</span>;</span><br><span class="line">  </span><br><span class="line">  public int b() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.b;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">B03</span> <span class="keyword">extends</span> <span class="title">A03</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> int age = <span class="number">20</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line">  </span><br><span class="line">  public int age() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public <span class="type">String</span> name() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void name_$eq(<span class="type">String</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="3">
<li>如果是覆写一个父类的抽象属性，那么override 关键字可省略 [原因：父类的抽象属性，生成的是抽象方法，因此就不涉及到方法重写的概念，因此override可省略，当然也可以写override]</li>
</ol>

        <h3 id="66-抽象类"   >
          <a href="#66-抽象类" class="heading-link"><i class="fas fa-link"></i></a>6.6 抽象类</h3>
      
<p>抽象类基本语法</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 抽象类</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> <span class="comment">// 抽象字段, 没有初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printName</span> <span class="title">//</span> <span class="title">抽象方法</span>, <span class="title">没有方法体</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></div></figure>
<p>说明：抽象类的价值更多是在于设计，是设计者设计好后，让子类继承并实现抽象类(即：实现抽象类的抽象方法)</p>
<p>Scala抽象类使用的注意事项和细节讨论</p>
<ol>
<li>抽象类不能被实例</li>
<li>抽象类不一定要包含abstract方法。也就是说，抽象类可以没有abstract方法</li>
<li>一旦类包含了抽象方法或者抽象属性，则这个类必须声明为abstract</li>
<li>抽象方法不能有主体，不允许使用abstract修饰。</li>
<li>如果一个类继承了抽象类，则它必须实现抽象类的所有抽象方法和抽象属性，除非它自己也声明为abstract类。（java里面只要实现抽象方法就行了）<br />
6)抽象方法和抽象属性不能使用private、final 来修饰，因为这些关键字都是和重写/实现相违背的。</li>
<li>抽象类中可以有实现的方法</li>
<li>子类重写抽象方法不需要override，写上也不会错</li>
</ol>
<p><strong>匿名子类</strong></p>
<p>和Java一样，可以通过包含带有定义或重写的代码块的方式创建一个匿名的子类.</p>
<p>回顾-java匿名子类使用</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cry</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A2 obj = <span class="keyword">new</span> A2() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"okook!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></div></figure>
<p>scala匿名子类</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Monster</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">cry</span></span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> monster = <span class="keyword">new</span> <span class="type">Monster</span> &#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"牛魔王"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">cry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"牛魔王哼哼叫唤.."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>继承层级</strong></p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210322223800.png"  alt="" />
      </p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324101314.png"  alt="" />
      </p>
<ol>
<li>在scala中，所有其他类都是AnyRef的子类，类似Java的Object。</li>
<li>AnyVal和AnyRef都扩展自Any类。Any类是根节点</li>
<li>Any中定义了isInstanceOf、asInstanceOf方法，以及哈希方法等。</li>
<li>Null类型的唯一实例就是null对象。可以将null赋值给任何引用，但不能赋值给值类型的变量。</li>
<li>Nothing类型没有实例，它是任何类型的子类型，可以交给一个变量和函数。它对于泛型结构是有用处的，举例：空列表Nil的类型是List[Nothing]，它是List[T]的子类型，T可以是任何类。</li>
</ol>

        <h2 id="7-静态概念与伴生对象"   >
          <a href="#7-静态概念与伴生对象" class="heading-link"><i class="fas fa-link"></i></a>7. 静态概念与伴生对象</h2>
      
<p>回顾下Java的静态概念</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public static 返回值类型  方法名(参数列表) &#123;方法体&#125;</span><br><span class="line">静态属性...</span><br></pre></td></tr></table></div></figure>
<p>Java中静态方法并不是通过对象调用的，而是通过类对象调用的，所以静态操作并不是面向对象的。</p>
<p><strong>Scala中静态的概念-伴生对象</strong></p>
<p>Scala语言是完全面向对象(万物皆对象)的语言，所以并没有静态的操作(即在Scala中没有静态的概念)。但是为了能够和Java语言交互(因为Java中有静态概念)，就产生了一种特殊的对象来模拟类对象，我们称之为类的<strong>伴生对象</strong>。这个类的所有静态内容都可以放置在它的伴生对象中声明和调用</p>
<p><strong>伴生对象的快速入门</strong></p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaPerson</span> </span>&#123;<span class="comment">//class ScalaPerson 是伴生类</span></span><br><span class="line">	<span class="keyword">var</span> name : <span class="type">String</span> = _</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaPerson</span> </span>&#123;<span class="comment">//object ScalaPerson 是伴生对象</span></span><br><span class="line">	<span class="keyword">var</span> sex : <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">println(<span class="type">ScalaPerson</span>.sex)<span class="comment">//可以直接输出</span></span><br></pre></td></tr></table></div></figure>
<ol>
<li>Scala中伴生对象采用object关键字声明，伴生对象中声明的全是 &quot;静态&quot;内容，<strong>可以通过伴生对象名称直接调用</strong>。</li>
<li><strong>伴生对象对应的类称之为伴生类</strong>，伴生对象的名称应该和伴生类名一致。</li>
<li>伴生对象中的属性和方法都可以<strong>通过伴生对象名</strong>(类名)直接调用访问，伴生类可以直接使用伴生对象中的属性和方法【看第(5)的反编译】</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test12</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    println(<span class="type">ScalaPerson1</span>.sex)<span class="comment">//伴生对象中的sex通过伴生对象名访问</span></span><br><span class="line">    <span class="keyword">val</span> s=<span class="keyword">new</span> <span class="type">ScalaPerson1</span> <span class="comment">//name只能通过new出来的对象访问</span></span><br><span class="line">    println(s.name)</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> a=<span class="type">ScalaPerson1</span><span class="comment">//这种方式也是通过伴生对象访问，只不过赋值给了一个变量</span></span><br><span class="line">    println(a.sex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaPerson1</span> </span>&#123;<span class="comment">//object ScalaPerson 是伴生对象</span></span><br><span class="line">  <span class="keyword">var</span> sex : <span class="type">Boolean</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaPerson1</span> </span>&#123;<span class="comment">//class ScalaPerson 是伴生类</span></span><br><span class="line">  <span class="keyword">var</span> name : <span class="type">String</span> = _</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="4">
<li>
<p>从语法角度来讲，所谓的伴生对象其实就是类的静态方法和成员的集合</p>
</li>
<li>
<p>从技术角度来讲，scala还是没有生成静态的内容，<strong>只不过是将伴生对象生成了一个新的类，实现属性和方法的调用</strong>。[反编译看源码]</p>
</li>
</ol>
<p>将（3）中scala反编译为java</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ScalaPerson1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">String</span> name;</span><br><span class="line">  </span><br><span class="line">  public static void sex_$eq(boolean paramBoolean) &#123;</span><br><span class="line">    <span class="type">ScalaPerson1</span>$.<span class="type">MODULE</span>$.sex_$eq(paramBoolean);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public static boolean sex() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">ScalaPerson1</span>$.<span class="type">MODULE</span>$.sex();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public <span class="type">String</span> name() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void name_$eq(<span class="type">String</span> x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ScalaPerson1$</span> </span>&#123;</span><br><span class="line">  public static <span class="type">ScalaPerson1</span>$ <span class="type">MODULE</span>$;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> boolean sex;</span><br><span class="line">  </span><br><span class="line">  public boolean sex() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.sex;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  public void sex_$eq(boolean x$<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.sex = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="type">ScalaPerson1</span>$() &#123;</span><br><span class="line">    <span class="type">MODULE</span>$ = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.sex = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="6">
<li>
<p>从底层原理看，伴生对象实现静态特性是依赖于 public static final MODULE$ 实现的。</p>
</li>
<li>
<p>如果 class A 独立存在，那么A就是一个类， 如果 object A 独立存在，那么A就是一个&quot;静态&quot;性质的对象[即<strong>类对象</strong>], 此时在 object A中声明的属性和方法可以通过 <code>A.属性</code> 和 <code>A.方法</code> 来实现调用</p>
</li>
</ol>
<p>8）<strong>如果伴生对象和伴生类同时出现</strong>，伴生对象的声明应该和伴生类的声明在同一个源码文件中(如果不在同一<br />
个文件中会运行错误，会提示类已存在的错误)，但是如果没有伴生类，也就没有所谓的伴生对象了，所以放在哪里就无所谓了。</p>
<ol start="9">
<li>当一个文件中，存在伴生类和伴生对象时，文件的图标会发生变化</li>
</ol>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210323200911.png"  alt="" />
      </p>
<p><strong>伴生对象-apply方法</strong></p>
<p>先来看几个例子：</p>
<p>示例1</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test15</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> t1 = <span class="keyword">new</span> <span class="type">TestA</span></span><br><span class="line">    t1(<span class="string">"layne1"</span>)  <span class="comment">//会输出 TestA apply method called:layne1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestA</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(param:<span class="type">String</span>)&#123;</span><br><span class="line">    println(<span class="string">"TestA apply method called:"</span> + param)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>示例2</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test16</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">TestB</span>(<span class="string">"layne2"</span>)<span class="comment">//会输出 TestB apply method called:layne2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestB</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(param:<span class="type">String</span>)&#123;</span><br><span class="line">    println(<span class="string">"TestB apply method called:"</span> + param)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>可以看出，apply方法调用：用括号传递给<strong>类对象</strong>或<strong>伴生对象</strong>一个或多个参数时，Scala会在相应的类或对象中查找方法名为apply且参数列表与传入的参数一致的方法，并用传入的参数来<strong>调用该apply方法</strong>，并获取apply方法的返回值。</p>
<p>另外，apply方法也支持重载。</p>
<p>在Scala中，我们把所有类的构造方法以apply方法的形式定义在它的伴生对象当中，这样伴生对象的方法就会自动被调用，调用就会生成类对象。</p>
<p>示例3</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Test</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test17</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> mycar=<span class="type">Car</span>(<span class="string">"tom"</span>)</span><br><span class="line">    mycar.info()<span class="comment">//输出Car name is tom</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>(<span class="params">name:<span class="type">String</span></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">info</span></span>()&#123;</span><br><span class="line">    println(<span class="string">"Car name is "</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Car</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name:<span class="type">String</span>) = <span class="keyword">new</span> <span class="type">Car</span>(name) <span class="comment">//调用伴生类Car的构造方法</span></span><br><span class="line">  <span class="comment">//def apply(name:String):Car = new Car(name) //这个写法同上</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>Scala之所以用apply方法是为了保持它的对象和函数之间使用的一致性，因为Scala融合了面向对象和函数式两种编程风格，它是一种混合式的编程。</p>
<ul>
<li>面向对象调用：对象.方法</li>
<li>函数式调用：函数(参数)</li>
</ul>
<p>Scala中函数式的调用可以转化成对象调用，同理对象调用也可以被转化成函数的调用。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//示例3里面</span></span><br><span class="line"><span class="keyword">val</span> mycar=<span class="type">Car</span>(<span class="string">"tom"</span>)<span class="comment">//函数式调用,前提是定义了apply方法</span></span><br><span class="line">mycar.info()<span class="comment">//函数式调用转化为 面向对象调用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在示例1里面</span></span><br><span class="line"><span class="keyword">val</span> t1 = <span class="keyword">new</span> <span class="type">TestA</span> </span><br><span class="line">t1(<span class="string">"layne1"</span>)  <span class="comment">//对象调用转化为函数式调用，前提是定义了apply方法</span></span><br></pre></td></tr></table></div></figure>

        <h2 id="8-接口trait特征"   >
          <a href="#8-接口trait特征" class="heading-link"><i class="fas fa-link"></i></a>8 接口&amp;trait（特征）</h2>
      

        <h3 id="81-scala中的接口与trait"   >
          <a href="#81-scala中的接口与trait" class="heading-link"><i class="fas fa-link"></i></a>8.1 scala中的接口与trait</h3>
      
<p><strong>回顾Java接口</strong></p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//声明接口</span><br><span class="line">interface 接口名</span><br><span class="line">//实现接口</span><br><span class="line">class 类名 implements 接口名1，接口2</span><br></pre></td></tr></table></div></figure>
<ol>
<li>在Java中, 一个类可以实现多个接口。</li>
<li>在Java中，接口之间支持多继承</li>
<li>接口中属性都是常量</li>
<li>接口中的方法都是抽象的</li>
</ol>
<p><strong>Scala接口</strong></p>
<p>从面向对象来看，接口并不属于面向对象的范畴，Scala是纯面向对象的语言，在Scala中，没有接口。</p>
<p>Scala语言中，采用特质trait（特征）来代替接口的概念，也就是说，多个类具有相同的特征（特征）时，就可以将这个特质（特征）独立出来，采用关键字trait声明。 理解trait 等价于(interface + abstract class)</p>
<p><strong>trait 的声明</strong></p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">trait 特质名 &#123;</span><br><span class="line">	trait体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>Serializable就是scala的一个特质：</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T1</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>在scala中，java中的接口可以当做特质使用。</p>

        <h3 id="82-trait-的使用"   >
          <a href="#82-trait-的使用" class="heading-link"><i class="fas fa-link"></i></a>8.2 trait 的使用</h3>
      
<p>一个类具有某种特质（特征），就意味着这个类满足了这个特质（特征）的所有要素，所以在使用时，也采用了extends关键字，如果有多个特质或存在父类，那么需要采用with关键字连接</p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324103437.png"  alt="" />
      </p>
<p>可以把特质可以看作是对继承的一种补充，Scala的继承是单继承，也就是一个类最多只能有一个父类，这种单继承的机制可保证类的纯洁性，比c++中的多继承机制简洁。但对子类功能的扩展有一定影响，所以我们认为: Scala引入trait特征，第一可以替代Java的接口,  第二个也是对单继承机制的一种补充。</p>
<ol>
<li>Scala提供了特质（trait），特质可以同时拥有抽象方法和具体方法，一个类可以实现/继承多个特质。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> a:<span class="type">Trait01</span>=<span class="keyword">new</span> <span class="type">AA</span></span><br><span class="line">    a.sayOK()</span><br><span class="line">    a.sayHello()</span><br><span class="line">    <span class="keyword">val</span> trait01Obj=<span class="keyword">new</span> <span class="type">Trait01</span> &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayOK</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"trait01Obj sayOk"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    trait01Obj.sayHello()</span><br><span class="line">    trait01Obj.sayOK()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Trait01</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayOK</span></span>()</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>():<span class="type">Unit</span>=&#123;</span><br><span class="line">    println(<span class="string">"Trait01 sayHello"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> <span class="keyword">extends</span> <span class="title">Trait01</span></span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayOK</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">    println(<span class="string">"AA sayOk"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>上面的代码反编译为java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Trait01</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> $init$(Trait01 $<span class="keyword">this</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Predef$.MODULE$.println(<span class="string">"Trait01 sayHello"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">sayOK</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AA</span> <span class="keyword">implements</span> <span class="title">Trait01</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Trait01.sayHello$(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">AA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Trait01.$init$(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayOK</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Predef$.MODULE$.println(<span class="string">"AA sayOk"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="2">
<li>
<p>特质中没有实现的方法就是抽象方法。类通过extends继承特质，通过with可以继承多个特质</p>
</li>
<li>
<p>所有的java接口都可以当做Scala特质使用</p>
</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(msg: <span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Console</span> <span class="keyword">extends</span> <span class="title">Logger</span> <span class="keyword">with</span> <span class="title">Cloneable</span> <span class="keyword">with</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(msg: <span class="type">String</span>) &#123;</span><br><span class="line">    println(msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol start="4">
<li>和Java中的接口不太一样的是特质中的方法并不一定是抽象的，也可以有非抽象方法(即：实现了的方法)。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"保存数据="</span>+id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DB</span> <span class="keyword">extends</span> <span class="title">Operate</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span>  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="string">"向数据库中"</span>)</span><br><span class="line">    <span class="keyword">super</span> .insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span> <span class="keyword">extends</span> <span class="title">DB</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h3 id="83-带有特质的对象"   >
          <a href="#83-带有特质的对象" class="heading-link"><i class="fas fa-link"></i></a>8.3 带有特质的对象</h3>
      
<ol>
<li>除了可以在类声明时继承特质以外，<strong>还可以在构建对象时混入特质</strong>，扩展目标类的功能</li>
<li>此种方式也可以应用于对抽象类功能进行扩展</li>
<li>动态混入是Scala特有的方式（java没有动态混入），可在不修改类声明/定义的情况下，扩展类的功能，非常的灵活，耦合性低 。</li>
<li>动态混入可以在不影响原有的继承关系的基础上，给指定的类扩展功能。</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">var</span> oracle = <span class="keyword">new</span> <span class="type">OracleDB</span> <span class="keyword">with</span> <span class="type">Operate3</span></span><br><span class="line">    oracle.insert(<span class="number">999</span>)</span><br><span class="line">    <span class="keyword">val</span> mysql = <span class="keyword">new</span> <span class="type">MySQL3</span> <span class="keyword">with</span> <span class="type">Operate3</span> &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">connect</span></span>(): <span class="type">Int</span> = &#123;</span><br><span class="line">        println(<span class="string">"hello mysql connect"</span>)</span><br><span class="line">        <span class="number">1</span>+<span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mysql.insert(<span class="number">4</span>)</span><br><span class="line">    mysql.connect()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate3</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"插入数据 = "</span> + id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OracleDB</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MySQL3</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">connect</span></span>():<span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>在Scala中创建对象共有几种方式</strong></p>
<ol>
<li>new 对象</li>
<li>apply 创建</li>
<li>匿名子类方式</li>
<li>动态混入</li>
</ol>

        <h3 id="84-叠加特质"   >
          <a href="#84-叠加特质" class="heading-link"><i class="fas fa-link"></i></a>8.4 叠加特质</h3>
      
<blockquote>
<p>叠加特指是本质上也是动态混入</p>
</blockquote>
<p>构建对象的同时如果混入多个特质，称之为叠加特质，仔细看下面的代码注释，理解叠加特质的含义</p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324121243.png"  alt="" />
      </p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1.Scala在叠加特质的时候，从左到右叠加，即对于mysql1来说先DB4，在File4</span></span><br><span class="line">    <span class="keyword">val</span> mysql1 = <span class="keyword">new</span> <span class="type">MySQL4</span> <span class="keyword">with</span> <span class="type">DB4</span> <span class="keyword">with</span> <span class="type">File4</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * mysql这里输出</span></span><br><span class="line"><span class="comment">    * Operate4...</span></span><br><span class="line"><span class="comment">      Data4</span></span><br><span class="line"><span class="comment">      DB4</span></span><br><span class="line"><span class="comment">      File4</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="comment">//val mysql2 = new MySQL4 with File4 with DB4</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * mysql2这里输出</span></span><br><span class="line"><span class="comment">    * Operate4...</span></span><br><span class="line"><span class="comment">      Data4</span></span><br><span class="line"><span class="comment">      File4</span></span><br><span class="line"><span class="comment">      DB4</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//在动态混入时，果调用super，并不是表示调用父特质的方法，而是向前面（左边）继续查找特质，如果找不到，才会去父特质查找</span></span><br><span class="line">    <span class="comment">//下面输出： (File4)向文件(DB4)向数据库(Data4)插入数据 = 888</span></span><br><span class="line">    mysql1.insert (<span class="number">888</span>)<span class="comment">//最先执行File4里面，在调用super是DB4里面的</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate4</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"Operate4..."</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Data4</span> <span class="keyword">extends</span> <span class="title">Operate4</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"Data4"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"(Data4)插入数据 = "</span> + id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DB4</span> <span class="keyword">extends</span> <span class="title">Data4</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"DB4"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="string">"(DB4)向数据库"</span>)</span><br><span class="line">    <span class="keyword">super</span>.insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">File4</span> <span class="keyword">extends</span> <span class="title">Data4</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"File4"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="string">"(File4)向文件"</span>)</span><br><span class="line">    <span class="keyword">super</span>.insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL4</span> </span>&#123;&#125;</span><br></pre></td></tr></table></div></figure>
<p>在特质中重写抽象方法特例</p>
<p>看下面的代码</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id : <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">File5</span> <span class="keyword">extends</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"将数据保存到文件中.."</span>)</span><br><span class="line">    <span class="keyword">super</span>.insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>运行代码，编译无法通过，报错信息为：</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">method insert in trait Operate5 is accessed from super. It may not be abstract unless it is overridden by a member declared `abstract' and `override'</span><br><span class="line"> 	super.insert(id)</span><br></pre></td></tr></table></div></figure>
<p>因为我们在特质File5中调用super的insert方法，而Operate5的该方法却没有具体实现，因此报错</p>
<p><strong>解决方法</strong></p>
<p>方式1 : 去掉 super()…</p>
<p>方式2: 声明 abstract override，编译通过</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id : <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">File5</span> <span class="keyword">extends</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"将数据保存到文件中.."</span>)</span><br><span class="line">    <span class="keyword">super</span>.insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>理解 abstract override 的小技巧分享：<br />
可以这里理解，当我们给某个方法增加了<code>abstract override</code> 后，就是明确的告诉编译器，该方法确实是重写了父特质的抽象方法，但是重写后，该方法仍然是一个抽象方法（因为没有完全的实现，需要其它特质继续实现[<strong>通过混入顺序</strong>]）</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> mysql5 = <span class="keyword">new</span> <span class="type">MySQL5</span> <span class="keyword">with</span> <span class="type">DB5</span>  <span class="keyword">with</span> <span class="type">File5</span></span><br><span class="line">    mysql5.insert(<span class="number">123</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(id : <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">File5</span> <span class="keyword">extends</span> <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"(File5)将数据保存到文件中.."</span>)</span><br><span class="line">    <span class="keyword">super</span>.insert(id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DB5</span> <span class="keyword">extends</span>  <span class="title">Operate5</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"(DB5)将数据保存到数据库中.."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL5</span> </span>&#123;&#125;</span><br></pre></td></tr></table></div></figure>
<p>输出：</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(File5)将数据保存到文件中..</span><br><span class="line">(DB5)将数据保存到数据库中..</span><br></pre></td></tr></table></div></figure>
<p>结合上面的代码，看4个案例</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql2 = <span class="keyword">new</span> <span class="type">MySQL5</span>  <span class="keyword">with</span> <span class="type">DB5</span> <span class="comment">//ok</span></span><br><span class="line">mysql2.insert(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">var</span> mysql3 = <span class="keyword">new</span> <span class="type">MySQL5</span>  <span class="keyword">with</span> <span class="type">File5</span> <span class="comment">//error</span></span><br><span class="line">mysql2.insert(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">var</span> mysql4 = <span class="keyword">new</span> <span class="type">MySQL5</span> <span class="keyword">with</span> <span class="type">File5</span> <span class="keyword">with</span> <span class="type">DB5</span><span class="comment">// error</span></span><br><span class="line">mysql4.insert(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">var</span> mysql4 = <span class="keyword">new</span> <span class="type">MySQL5</span> <span class="keyword">with</span> <span class="type">DB5</span> <span class="keyword">with</span> <span class="type">File5</span><span class="comment">// ok</span></span><br><span class="line">mysql4.insert(<span class="number">100</span>)</span><br></pre></td></tr></table></div></figure>

        <h3 id="85-特质中的字段和方法"   >
          <a href="#85-特质中的字段和方法" class="heading-link"><i class="fas fa-link"></i></a>8.5 特质中的字段和方法</h3>
      
<p>富接口：即该特质中既有抽象方法，又有非抽象方法</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Operate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>( id : <span class="type">Int</span> ) <span class="comment">//抽象</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pageQuery</span></span>(pageno:<span class="type">Int</span>, pagesize:<span class="type">Int</span>): <span class="type">Unit</span> = &#123; <span class="comment">//实现</span></span><br><span class="line">    	println(<span class="string">"分页查询"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>特质中的具体字段</strong></p>
<p>特质中可以定义具体字段，如果初始化了就是具体字段，如果不初始化就是抽象字段。混入该特质的类就具有了该字段，字段不是继承，而是直接加入类，成为自己的字段。</p>
<p><strong>特质中的抽象字段</strong></p>
<p>特质中未被初始化的字段在具体的子类中必须被重写。</p>

        <h3 id="86-特质构造顺序"   >
          <a href="#86-特质构造顺序" class="heading-link"><i class="fas fa-link"></i></a>8.6 特质构造顺序</h3>
      
<p>特质也是有构造器的，构造器中的内容由“字段的初始化”和一些其他语句构成。具体实现请参考“特质叠加”。</p>
<p>第一种特质构造顺序(声明类的同时混入特质)</p>
<ol>
<li>调用当前类的超类构造器</li>
<li>第一个特质的父特质构造器</li>
<li>第一个特质构造器</li>
<li>第二个特质构造器的父特质构造器, 如果已经执行过，就不再执行</li>
<li>第二个特质构造器</li>
<li>…重复4,5的步骤(如果有第3个，第4个特质)</li>
<li>当前类构造器</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T5</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> ff1 = <span class="keyword">new</span> <span class="type">FF</span>()</span><br><span class="line">    println(ff1)</span><br><span class="line">    <span class="keyword">val</span> ff2 = <span class="keyword">new</span> <span class="type">KK</span>()</span><br><span class="line">    println(ff2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"A..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">BB</span> <span class="keyword">extends</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"B...."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">CC</span> <span class="keyword">extends</span> <span class="title">BB</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"C...."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DD</span> <span class="keyword">extends</span> <span class="title">BB</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"D...."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EE</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"E..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FF</span> <span class="keyword">extends</span> <span class="title">EE</span> <span class="keyword">with</span> <span class="title">CC</span> <span class="keyword">with</span> <span class="title">DD</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"F...."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KK</span> <span class="keyword">extends</span> <span class="title">EE</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"K...."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>输出：</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">E</span>...</span><br><span class="line"><span class="type">A</span>...</span><br><span class="line"><span class="type">B</span>....</span><br><span class="line"><span class="type">C</span>....</span><br><span class="line"><span class="type">D</span>....</span><br><span class="line"><span class="type">F</span>....</span><br><span class="line">traitPackage.<span class="type">FF</span>@<span class="number">1</span>b40d5f0</span><br><span class="line"><span class="type">E</span>...</span><br><span class="line"><span class="type">K</span>....</span><br><span class="line">traitPackage.<span class="type">KK</span><span class="meta">@ea</span>4a92b</span><br></pre></td></tr></table></div></figure>
<p>第2种特质构造顺序(在构建对象时，动态混入特质)</p>
<ol>
<li>调用当前类的超类构造器</li>
<li>当前类构造器</li>
<li>第一个特质构造器的父特质构造器</li>
<li>第一个特质构造器.</li>
<li>第二个特质构造器的父特质构造器, 如果已经执行过，就不再执行</li>
<li>第二个特质构造器</li>
<li>…重复5,6的步骤(如果有第3个，第4个特质)</li>
<li>当前类构造器</li>
</ol>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T6</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span>  f=<span class="keyword">new</span> <span class="type">MB</span> <span class="keyword">with</span> <span class="type">F3</span> <span class="keyword">with</span> <span class="type">F2</span></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span>  <span class="title">F1</span></span>&#123;</span><br><span class="line">  println(<span class="string">"F1..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span>  <span class="title">F2</span> <span class="keyword">extends</span> <span class="title">F1</span></span>&#123;</span><br><span class="line">  println(<span class="string">"F2..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span>  <span class="title">F3</span> <span class="keyword">extends</span> <span class="title">F1</span></span>&#123;</span><br><span class="line">  println(<span class="string">"F3..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MA</span></span>&#123;</span><br><span class="line">  println(<span class="string">"MA..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MB</span> <span class="keyword">extends</span> <span class="title">MA</span></span>&#123;</span><br><span class="line">  println(<span class="string">"MB...."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>输出</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MA...</span><br><span class="line">MB....</span><br><span class="line">F1...</span><br><span class="line">F3...</span><br><span class="line">F2...</span><br></pre></td></tr></table></div></figure>
<p>分析两种方式对构造顺序的影响<br />
第1种方式实际是构建类对象, 在混入特质时，该对象还没有创建。<br />
第2种方式实际是构造匿名子类，可以理解成在混入特质时，对象已经创建了</p>

        <h3 id="87-扩展类的特质"   >
          <a href="#87-扩展类的特质" class="heading-link"><i class="fas fa-link"></i></a>8.7 扩展类的特质</h3>
      
<p>特质可以继承类，以用来拓展该类的一些功能</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">LoggedException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">        println(getMessage()) <span class="comment">// 方法来自于Exception类</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>所有混入该特质的类，会自动成为那个特质所继承的超类的子类</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">LoggedException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(getMessage()) <span class="comment">// 方法来自于Exception类</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为LoggedException继承了Exception</span></span><br><span class="line"><span class="comment">//而UnhappyException继承了LoggedException</span></span><br><span class="line"><span class="comment">//所以UnhappyException是Excpetion的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnhappyException</span> <span class="keyword">extends</span> <span class="title">LoggedException</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 已经是Exception的子类了，所以可以重写方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getMessage</span> </span>= <span class="string">"错误消息！"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>如果混入该特质的类，已经继承了另一个类(A类)，则要求A类是特质超类的子类，否则就会出现了多继承现象，发生错误。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>  traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T7</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">LoggedException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(getMessage()) <span class="comment">// 方法来自于Exception类</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnhappyException</span> <span class="keyword">extends</span> <span class="title">LoggedException</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 已经是Exception的子类了，所以可以重写方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getMessage</span> </span>= <span class="string">"错误消息！"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//正确：因为IndexOutOfBoundsException是LoggedException特质的超累Exception的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnhappyException2</span> <span class="keyword">extends</span> <span class="title">IndexOutOfBoundsException</span> <span class="keyword">with</span> <span class="title">LoggedException</span></span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getMessage</span> </span>= <span class="string">"错误消息！"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCC</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//错误：因为CCC不是LoggedException特质的超累Exception的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnhappyException3</span> <span class="keyword">extends</span> <span class="title">CCC</span> <span class="keyword">with</span> <span class="title">LoggedException</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>这个错误信息如下：</p>
<figure class="highlight tex"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">illegal inheritance; superclass CCC</span><br><span class="line"> is not a subclass of the superclass Exception</span><br><span class="line"> of the mixin trait LoggedException</span><br><span class="line">class UnhappyException3 extends CCC with LoggedException&#123;</span><br></pre></td></tr></table></div></figure>
<p>当然，如果该特质没有超类，则就没有这个限制了。即如果LoggedException没有超类，则对CCC没有任何限制了</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCC</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span>  <span class="title">AAA</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span>  <span class="title">BBB</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="title">UnhappyException4</span> <span class="keyword">extends</span> <span class="title">CCC</span> <span class="keyword">with</span> <span class="title">AAA</span> <span class="keyword">with</span> <span class="title">BBB</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p>对于上面这个例子来说，要么CCC、AAA、BBB有相同的父类，要么没有父类</p>

        <h3 id="88-自身类型selftype"   >
          <a href="#88-自身类型selftype" class="heading-link"><i class="fas fa-link"></i></a>8.8 自身类型(selftype)</h3>
      
<p>自身类型：主要是为了解决特质的循环依赖问题，同时可以确保特质在不扩展某个类的情况下，依然可以做到限制混入该特质的类的类型。</p>
<p>所谓的循环依赖是指：两个类互相依赖，互相是对象父类或子类</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Logger就是自身类型特质(selftype)，当这里做了自身类型后，那么就</span></span><br><span class="line"><span class="comment">//相当于 trait Logger extends Exception，要求混入该特质的类也是Exception子类</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 明确告诉编译器，我就是Exception,如果没有这句话，下面的getMessage不能调用</span></span><br><span class="line">  <span class="keyword">this</span>: <span class="type">Exception</span> =&gt;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">    <span class="comment">// 既然我就是Exception, 那么就可以调用其中的方法</span></span><br><span class="line">    println(getMessage)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Console</span> <span class="keyword">extends</span>  <span class="title">Logger</span> </span>&#123;&#125; <span class="comment">//对吗? 不对，Logger这个自身类型特质(selftype)，要求混入该特质的类也是Exception子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Console</span> <span class="keyword">extends</span> <span class="title">Exception</span> <span class="keyword">with</span> <span class="title">Logger//对吗?正确，先继承了Eception</span>,<span class="title">再混入该特质</span></span></span><br></pre></td></tr></table></div></figure>

        <h2 id="29-嵌套类"   >
          <a href="#29-嵌套类" class="heading-link"><i class="fas fa-link"></i></a>2.9 嵌套类</h2>
      

        <h3 id="91-嵌套类的使用"   >
          <a href="#91-嵌套类的使用" class="heading-link"><i class="fas fa-link"></i></a>9.1 嵌套类的使用</h3>
      
<p>在Scala中，你几乎可以在任何语法结构中内嵌任何语法结构。如在类中可以再定义一个类，这样的类是嵌套类，其他语法结构也是一样。嵌套类类似于Java中的内部类。</p>
<p><strong>Java内部类的分类</strong></p>
<p>从定义在外部类的成员位置上来看，</p>
<ol>
<li>成员内部类（没用static修饰）</li>
<li>和静态内部类（使用static修饰），<br />
定义在外部类局部位置上（比如方法内）来看：</li>
<li>分为局部内部类（有类名）</li>
<li>匿名内部类（没有类名）</li>
</ol>
<p>这里我们就回顾一下成员内部类和静态内部类。</p>
<p>
        <img   class="lazyload lazyload-gif"
          src="/images/loading.svg" data-src="https://gitee.com/wxler/blogimg/raw/master/imgs/20210324141129.png"  alt="img" />
      </p>
<p><strong>Scala嵌套类的使用1</strong></p>
<p>请编写程序，定义Scala 的成员内部类和静态内部类，并创建相应的对象实例。</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaOuterClass</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaInnerClass</span> </span>&#123; <span class="comment">//成员内部类</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaOuterClass</span> </span>&#123;  <span class="comment">//伴生对象</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaStaticInnerClass</span> </span>&#123; <span class="comment">//静态内部类</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> outer1 : <span class="type">ScalaOuterClass</span> = <span class="keyword">new</span> <span class="type">ScalaOuterClass</span>();</span><br><span class="line"><span class="keyword">val</span> outer2 : <span class="type">ScalaOuterClass</span> = <span class="keyword">new</span> <span class="type">ScalaOuterClass</span>();</span><br><span class="line"><span class="comment">// Scala创建内部类的方式和Java不一样，将new关键字放置在前，使用  对象.内部类  的方式创建</span></span><br><span class="line"><span class="keyword">val</span> inner1 = <span class="keyword">new</span> outer1.<span class="type">ScalaInnerClass</span>()</span><br><span class="line"><span class="keyword">val</span> inner2 = <span class="keyword">new</span> outer2.<span class="type">ScalaInnerClass</span>()</span><br><span class="line"><span class="comment">//创建静态内部类对象</span></span><br><span class="line"><span class="keyword">val</span> staticInner = <span class="keyword">new</span></span><br><span class="line">    <span class="type">ScalaOuterClass</span>.<span class="type">ScalaStaticInnerClass</span>()</span><br><span class="line">println(staticInner)</span><br></pre></td></tr></table></div></figure>
<p><strong>Scala嵌套类的使用2</strong></p>
<p>请编写程序，在内部类中访问外部类的属性</p>
<p>方式1<br />
内部类如果想要访问外部类的属性，可以通过外部类对象访问。即：访问方式：外部类名.this.属性名</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaOuterClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"scott"</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> sal: <span class="type">Double</span> = <span class="number">1.2</span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaInnerClass</span> </span>&#123; <span class="comment">//成员内部类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info</span></span>() = &#123;</span><br><span class="line">      <span class="comment">// 访问方式：外部类名.this.属性名</span></span><br><span class="line">      <span class="comment">// 怎么理解 ScalaOuterClass.this 就相当于是 ScalaOuterClass 这个外部类的一个实例,</span></span><br><span class="line">      <span class="comment">// 然后通过 ScalaOuterClass.this 实例对象去访问 name 属性</span></span><br><span class="line">      <span class="comment">// 只是这种写法比较特别，学习java的同学可能更容易理解 ScalaOuterClass.class 的写法.</span></span><br><span class="line">      println(<span class="string">"name = "</span> + <span class="type">ScalaOuterClass</span>.<span class="keyword">this</span>.name</span><br><span class="line">        + <span class="string">" age ="</span> + <span class="type">ScalaOuterClass</span>.<span class="keyword">this</span>.sal)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaOuterClass</span> </span>&#123; <span class="comment">//伴生对象</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaStaticInnerClass</span> </span>&#123; <span class="comment">//静态内部类</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<p><strong>方式2</strong></p>
<p>内部类如果想要访问外部类的属性，也可以通过外部类别名访问(推荐)。即：访问方式：外部类名别名.属性名   【外部类名.this  等价 外部类名别名】</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaOuterClass</span> </span>&#123;</span><br><span class="line">  myOuter =&gt; <span class="comment">//这样写，你可以理解成这样写，myOuter就是代表外部类的一个对象.</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaInnerClass</span> </span>&#123; <span class="comment">//成员内部类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info</span></span>() = &#123;</span><br><span class="line">      println(<span class="string">"name = "</span> + <span class="type">ScalaOuterClass</span>.<span class="keyword">this</span>.name</span><br><span class="line">        + <span class="string">" age ="</span> + <span class="type">ScalaOuterClass</span>.<span class="keyword">this</span>.sal)</span><br><span class="line">      println(<span class="string">"-----------------------------------"</span>)</span><br><span class="line">      println(<span class="string">"name = "</span> + myOuter.name</span><br><span class="line">        + <span class="string">" age ="</span> + myOuter.sal)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 当给外部指定别名时，需要将外部类的属性放到别名后.</span></span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"scott"</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> sal: <span class="type">Double</span> = <span class="number">1.2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

        <h3 id="92-类型投影"   >
          <a href="#92-类型投影" class="heading-link"><i class="fas fa-link"></i></a>9.2 类型投影</h3>
      
<p>先看一段代码，引出类型投影</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> traitPackage</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">T10</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> outer1: <span class="type">ScalaOuterClass3</span> = <span class="keyword">new</span> <span class="type">ScalaOuterClass3</span>();</span><br><span class="line">    <span class="keyword">val</span> outer2: <span class="type">ScalaOuterClass3</span> = <span class="keyword">new</span> <span class="type">ScalaOuterClass3</span>();</span><br><span class="line">    <span class="keyword">val</span> inner1 = <span class="keyword">new</span> outer1.<span class="type">ScalaInnerClass3</span>()</span><br><span class="line">    <span class="keyword">val</span> inner2 = <span class="keyword">new</span> outer2.<span class="type">ScalaInnerClass3</span>()</span><br><span class="line">    inner1.test(inner1) <span class="comment">// ok, 因为 需要outer1.ScalaInner</span></span><br><span class="line">    inner2.test(inner2) <span class="comment">// ok, 因为 需要outer2.ScalaInner</span></span><br><span class="line">    <span class="comment">//在默认情况下，scala的内部类的实例和创建该内部类实例的外部对象关联</span></span><br><span class="line">    inner1.test(inner2) <span class="comment">// error, outer1需要outer1的那个内部类</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaOuterClass3</span> </span>&#123;</span><br><span class="line">  myOuter =&gt;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaInnerClass3</span> </span>&#123; <span class="comment">//成员内部类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(ic: <span class="type">ScalaInnerClass3</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="type">System</span>.out.println(ic)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
<ol>
<li>Java中的内部类从属于外部类,因此在java中 inner1.test(inner2) 就可以，因为是按类型来匹配的。</li>
<li>Scala中内部类从属于外部类的对象，所以外部类的对象不一样，创建出来的内部类也不一样，无法互换使用</li>
<li>比如你使用ideal 看一下在inner1.test()的形参上，它提示的类型是 outer1.ScalaInnerClass</li>
</ol>
<p><strong>解决方式-使用类型投影</strong></p>
<p>类型投影是指：在方法声明上，如果使用  <code>外部类#内部类</code>  的方式，表示忽略内部类的对象关系，等同于Java中内部类的语法操作，我们将这种方式称之为 类型投影（即：忽略对象的创建方式，只考虑类型）。</p>
<p>把上面的代码改为如下所示的代码，inner1.test(inner2)就不报错了</p>
<figure class="highlight scala"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaOuterClass3</span> </span>&#123;</span><br><span class="line">  myOuter =&gt;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ScalaInnerClass3</span> </span>&#123; <span class="comment">//成员内部类</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(ic: <span class="type">ScalaOuterClass3</span>#<span class="type">ScalaInnerClass3</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="type">System</span>.out.println(ic)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://wxler.github.io">wxler</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://wxler.github.io/2021/03/23/110855/">https://wxler.github.io/2021/03/23/110855/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://wxler.github.io/tags/scala/">scala</a></span></div><div class="post-share"><div class="social-share" data-sites="qzone, qq, weibo, wechat, douban, linkedin, facebook, twitter, google">分享到：</div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2021/03/24/152651/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">四、Scala之隐世转换与隐世参数</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2021/03/22/223515/"><span class="paginator-prev__text">二、Scala之函数式编程（基础部分）</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="valine-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-类与对象"><span class="toc-text">
          1. 类与对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-构造器"><span class="toc-text">
          2. 构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-属性高级"><span class="toc-text">
          3. 属性高级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-对象创建的流程"><span class="toc-text">
          4. 对象创建的流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-包"><span class="toc-text">
          5. 包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-scala包的特点概述"><span class="toc-text">
          5.1 Scala包的特点概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-scala包注意事项和使用细节"><span class="toc-text">
          5.2 Scala包注意事项和使用细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#53-包对象"><span class="toc-text">
          5.3 包对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#54-包的可见性"><span class="toc-text">
          5.4 包的可见性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#55-包的引入"><span class="toc-text">
          5.5 包的引入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-封装-继承-多态"><span class="toc-text">
          6. 封装、继承、多态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-封装"><span class="toc-text">
          6.1 封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-继承"><span class="toc-text">
          6.2 继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#63-类型检查和转换"><span class="toc-text">
          6.3 类型检查和转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#64-超类的构造"><span class="toc-text">
          6.4 超类的构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#65-覆盖属性方法"><span class="toc-text">
          6.5 覆盖属性&#x2F;方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#66-抽象类"><span class="toc-text">
          6.6 抽象类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-静态概念与伴生对象"><span class="toc-text">
          7. 静态概念与伴生对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-接口trait特征"><span class="toc-text">
          8 接口&amp;trait（特征）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#81-scala中的接口与trait"><span class="toc-text">
          8.1 scala中的接口与trait</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#82-trait-的使用"><span class="toc-text">
          8.2 trait 的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#83-带有特质的对象"><span class="toc-text">
          8.3 带有特质的对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#84-叠加特质"><span class="toc-text">
          8.4 叠加特质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#85-特质中的字段和方法"><span class="toc-text">
          8.5 特质中的字段和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#86-特质构造顺序"><span class="toc-text">
          8.6 特质构造顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#87-扩展类的特质"><span class="toc-text">
          8.7 扩展类的特质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#88-自身类型selftype"><span class="toc-text">
          8.8 自身类型(selftype)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29-嵌套类"><span class="toc-text">
          2.9 嵌套类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#91-嵌套类的使用"><span class="toc-text">
          9.1 嵌套类的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#92-类型投影"><span class="toc-text">
          9.2 类型投影</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/assets/myhexo.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Practical And Realistic</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/wxler" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="mailto:wangxiaolei1516@qq.com" target="_blank" rel="noopener" data-popover="邮箱" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fa fa-envelope"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">132</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">20</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">60</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020~2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>wxler. All Rights Reserved.</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v4.2.1</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.0.0</span></div><div>托管于 <a href="https://github.com/wxler/" rel="noopener" target="_blank">Github</a></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/ribbon.js@latest/dist/ribbon.min.js" size="120" alpha="0.6" zIndex="-1"></script><script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.min.js"></script><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.json';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);</script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js"></script><script>window.addEventListener('DOMContentLoaded', function () {
  var pjax = new Pjax({"selectors":["head title","#main",".pjax-reload"],"history":true,"scrollTo":false,"scrollRestoration":false,"cacheBust":false,"debug":false,"currentUrlFullReload":false,"timeout":0});
  // 加载进度条的计时器
  var loadingTimer = null;

  // 重置页面 Y 方向上的滚动偏移量
  document.addEventListener('pjax:send', function () {
    $('.header-nav-menu').removeClass('show');
    if (CONFIG.pjax && CONFIG.pjax.avoidBanner) {
      $('html').velocity('scroll', {
        duration: 500,
        offset: $('#header').height(),
        easing: 'easeInOutCubic'
      });
    }

    var loadingBarWidth = 20;
    var MAX_LOADING_WIDTH = 95;

    $('.loading-bar').addClass('loading');
    $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    clearInterval(loadingTimer);
    loadingTimer = setInterval(function () {
      loadingBarWidth += 3;
      if (loadingBarWidth > MAX_LOADING_WIDTH) {
        loadingBarWidth = MAX_LOADING_WIDTH;
      }
      $('.loading-bar__progress').css('width', loadingBarWidth + '%');
    }, 500);
  }, false);

  window.addEventListener('pjax:complete', function () {
    clearInterval(loadingTimer);
    $('.loading-bar__progress').css('width', '100%');
    $('.loading-bar').removeClass('loading');
    setTimeout(function () {
      $('.loading-bar__progress').css('width', '0');
    }, 400);
    $('link[rel=prefetch], script[data-pjax-rm]').each(function () {
      $(this).remove();
    });
    $('script[data-pjax], #pjax-reload script').each(function () {
      $(this).parent().append($(this).remove());
    });

    if (Stun.utils.pjaxReloadBoot) {
      Stun.utils.pjaxReloadBoot();
    }
    if (Stun.utils.pjaxReloadScroll) {
      Stun.utils.pjaxReloadScroll();
    }
    if (Stun.utils.pjaxReloadSidebar) {
      Stun.utils.pjaxReloadSidebar();
    }
    if (false) {
      if (Stun.utils.pjaxReloadHeader) {
        Stun.utils.pjaxReloadHeader();
      }
      if (Stun.utils.pjaxReloadScrollIcon) {
        Stun.utils.pjaxReloadScrollIcon();
      }
      if (Stun.utils.pjaxReloadLocalSearch) {
        Stun.utils.pjaxReloadLocalSearch();
      }
    }
  }, false);
}, false);</script><div id="pjax-reload"><link href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.css" rel="stylesheet" type="text/css"><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.min.js"></script></div><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@latest/dist/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><script data-pjax="">function loadValine () {
  var GUEST_INFO = ['nick', 'mail', 'link'];
  var guest_info = 'nick,mail';

  guest_info = guest_info.split(',').filter(function(item) {
    return GUEST_INFO.indexOf(item) > -1;
  });
  new Valine({
    el: '#valine-container',
    appId: 'kBUfBo302Sl5ViCNcWef6wYT-gzGzoHsz',
    appKey: 'hq4rU6YND5ziczBa2PLLUBiM',
    notify: true,
    verify: false,
    placeholder: '有什么需要和我说的，请填写昵称与邮箱(邮箱不会公开显示)，点击评论吧(支持匿名评论)！',
    avatar: 'mp',
    meta: guest_info,
    pageSize: '15' || 10,
    visitor: false,
    recordIP: false,
    lang: '' || 'zh-cn',
    path: window.location.pathname
  });
}

if (true) {
  loadValine();
} else {
  window.addEventListener('DOMContentLoaded', loadValine, false);
}</script><script src="/js/utils.js?v=2.0.0"></script><script src="/js/stun-boot.js?v=2.0.0"></script><script src="/js/scroll.js?v=2.0.0"></script><script src="/js/header.js?v=2.0.0"></script><script src="/js/sidebar.js?v=2.0.0"></script></body></html>